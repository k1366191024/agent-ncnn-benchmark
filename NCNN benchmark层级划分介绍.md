# NCNN benchmark层级划分介绍

# NCNN跨架构迁移 Benchmark

## 一、项目简介

本 Benchmark 旨在构建一套覆盖“技术验证-场景落地-规模部署”全流程的NCNN算子迁移评估体系，聚焦多硬件架构（x86/ARM/RISC-V/MIPS/Loongarch）下的算子迁移能力评估，为大模型、智能体及迁移工具的性能验证提供标准化参考，核心目标是解决当前评估与工业实际脱节的问题，推动迁移技术从实验室走向落地应用。

## 二、三级迁移层级设计说明

本 Benchmark 核心采用“算子级→模型级→库级”三级层级划分，设计逻辑源于对工业界迁移需求的深度拆解，确保评估既覆盖技术细节，又贴合实际使用场景：

### 1. 算子级迁移

### 设计初衷

作为迁移能力的“最小单元验证”，算子是 NCNN 所有上层功能的基础，任何复杂应用或深度学习模型均由单个算子组合构成。此层级聚焦无干扰的核心能力评估，排除无关代码、跨模块依赖等冗余因素，精准验证迁移方案对单个算子的逻辑识别、硬件指令适配及接口兼容性保障能力。同时，该层级对齐“最小完备上下文”原则，以单个算子为评估单位，避免资源浪费，确保迁移技术具备基础可行性。

### 核心评估方向

- 算子功能正确性（输入输出与原生实现一致性）
- 目标硬件指令适配效果（如 RVV/AVX/NEON/LSX 指令优化）
- 单算子迁移效率与性能（延迟、吞吐量）

### 2. 模型级迁移

### 设计初衷

工业界的真实迁移场景并非孤立处理单个算子，而是基于完整应用项目（如用于图像分类、图像分割、目标检测、姿势估计等下游任务的深度学习模型）的全流程适配。此层级旨在打通“技术可行”到“场景可用”的关键链路，模拟实际应用中“多算子关联、同一算子存在多种不同算法实现”的复杂环境，暴露孤立算子迁移中隐藏的问题（如算子间数据布局不一致、模型推理实时性不达标、硬件驱动适配失败等）。通过该层级评估，确保迁移方案不仅能迁对算子，更能支撑完整模型在新硬件上稳定运行。

### 核心评估方向

- 模型内目标算子识别准确率
- 模型与项目兼容性
- 场景核心指标达标率（实时性、功耗、部署成功率）

### 3. 库级迁移

### 设计初衷

针对企业级规模化部署需求，企业在新硬件集群（如国产芯片阵列、ARM 服务器集群）落地时，需批量迁移NCNN模型（如图像分类模型、目标检测模型）而非逐个算子或模型适配。此层级聚焦批量迁移的效率与协调性，需解决数十个关联算子的批量适配、跨算子依赖冲突协调、全模块编译部署兼容等规模化问题，凸显评估体系的企业级实用价值，区别于仅关注单点场景的常规评估方案。

### 核心评估方向

- 批量算子迁移效率与一致性
- 模型内跨算子依赖解决能力
- 全库编译部署成功率与资源占用

## 三、层级关联逻辑

三级层级呈“递进式”依赖关系，而非孤立存在：

1. 算子级为基础：确保迁移方案具备核心技术可行性，是模型级、库级迁移的前提；
2. 模型级为延伸：将基础技术能力嵌入真实场景，验证“技术能用”；
3. 库级为升级：实现从单点应用到规模化部署的跨越，满足企业级落地需求。

通过全链路层级设计，本 Benchmark 可全面回答工业界核心关切：“基础算子能不能迁？真实模型能不能用？批量模型能不能落地？”，为迁移技术的选型与优化提供完整参考。

## 四、使用说明

1. 测试数据集：提供“单算子测试集”“模型级项目集”“库级模型集”三类标准化数据，包含输入样例、预期输出、硬件配置文件及评估阈值；
2. 评估流程：支持按层级独立测试或全链路贯通测试，自动生成“功能+性能+兼容性”综合报告；
3. 扩展支持：兼容新增硬件架构与应用场景，可灵活补充测试用例与指标配置。

## 五、核心价值

1. 全流程覆盖：从技术验证到规模部署，构建无死角评估闭环；
2. 场景贴合：深度对齐工业界真实迁移需求，评估结果具备落地指导意义；
3. 标准化参考：提供统一的评估维度与指标，助力迁移技术的横向对比与迭代优化。