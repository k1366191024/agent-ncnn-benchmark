# ğŸš€ Agent-Driven NCNN Cross-Architecture Migration Benchmark
# æ™ºèƒ½ä½“é©±åŠ¨çš„ NCNN åº“è·¨æ¶æ„ä»£ç è¿ç§» Benchmark

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](./LICENSE)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](CONTRIBUTING.md)
[![RISC-V](https://img.shields.io/badge/Platform-RISC--V-red)](https://riscv.org/)
[![NCNN](https://img.shields.io/badge/Framework-NCNN-yellow)](https://github.com/Tencent/ncnn)

---

## ğŸ“– ç›®å½• (Table of Contents)

- [é¡¹ç›®ä»‹ç» (Introduction)](#-é¡¹ç›®ä»‹ç»-introduction)
- [ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ª Benchmarkï¼Ÿ(Background)](#-ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ª-benchmark-background)
- [è¿ç§»éš¾ç‚¹ (Key Challenges)](#-è¿ç§»éš¾ç‚¹-key-challenges)
- [ä¸å…¶ä»– Benchmark çš„å·®å¼‚ (Comparison)](#-ä¸å…¶ä»–-benchmark-çš„å·®å¼‚-comparison)
- [æµ‹è¯•é›†è®¾è®¡ä¸éš¾åº¦åˆ†çº§ (Dataset & Hierarchy)](#-æµ‹è¯•é›†è®¾è®¡ä¸éš¾åº¦åˆ†çº§-dataset--hierarchy)
- [æµ‹è¯•é¢˜ç›® (Test Cases)](#-æµ‹è¯•é¢˜ç›®-test-cases)
- [åŸºå‡†æµ‹è¯•ç»“æœ (SoTA Results)](#-åŸºå‡†æµ‹è¯•ç»“æœ-sota-results)
- [ä½¿ç”¨æ–¹æ³• (Getting Started)](#-ä½¿ç”¨æ–¹æ³•-getting-started)
- [å¼•ç”¨ (Citation)](#-å¼•ç”¨-citation)

---

## ğŸ“ é¡¹ç›®ä»‹ç» (Introduction)

ä¸ºäº†ä¿ƒè¿› RISC-V åŸºç¡€è½¯ä»¶ç”Ÿæ€ç¹è£ï¼ŒåŒæ—¶æ¨åŠ¨å­¦æœ¯ç•Œå’Œäº§ä¸šç•Œåˆ©ç”¨æ™ºèƒ½ä½“ï¼ˆAI Agentsï¼‰è¿›è¡Œè·¨æ¶æ„ä»£ç è¿ç§»çš„æ¢ç´¢ï¼Œæˆ‘ä»¬åŸºäºç«¯ä¾§æ€§èƒ½æè‡´ä¼˜åŒ–çš„ **NCNN æ¨ç†æ¡†æ¶**ï¼Œæ„å»ºäº†ä¸šç•Œé¦–ä¸ª**â€œæ™ºèƒ½ä½“é©±åŠ¨çš„ NCNN åº“è·¨æ¶æ„è¿ç§»â€Benchmark**ã€‚

è™½ç„¶ç›®å‰å·²ç»æœ‰ä¸€äº›é¡¹ç›®çº§ä»£ç  Benchmark å‘å¸ƒï¼Œä½†æ˜¯ï¼Œè¿™äº› Benchmark å¹¶ä¸é€‚ç”¨äºè·¨ä¸åŒç¡¬ä»¶æ¶æ„ï¼ˆç‰¹åˆ«æ˜¯é’ˆå¯¹ SIMD æŒ‡ä»¤é›†ï¼‰çš„ä»£ç è¿ç§»ä»»åŠ¡ã€‚æœ¬é¡¹ç›®çš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªæ ‡å‡†åŒ–çš„æµ‹è¯•å¹³å°ï¼Œè¯„ä¼°å¤§æ¨¡å‹æ™ºèƒ½ä½“å°†ç°æœ‰æˆç†Ÿæ¶æ„ï¼ˆx86/ARM/MIPS/LoongArchï¼‰çš„å‘é‡åŒ–å®ç°è‡ªåŠ¨è¿ç§»åˆ° RISC-V Vector (RVV) æ¶æ„çš„èƒ½åŠ›ï¼Œå¹¶å…³æ³¨ä»£ç çš„æ­£ç¡®æ€§ä¸æ€§èƒ½ä¼˜åŒ–ã€‚

---

## ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ª Benchmarkï¼Ÿ(Background)

### ç°çŠ¶ä¸ç—›ç‚¹
ç°æœ‰æ·±åº¦å­¦ä¹ æ¨ç†æ¡†æ¶å¤§å¤šæ•°å¹¶ä¸åŸç”Ÿæ”¯æŒ RISC-V å‘é‡æ‰©å±•åç«¯ã€‚è™½ç„¶ä»…æœ‰å°‘æ•°æ¡†æ¶æ‰‹åŠ¨æ”¯æŒäº†éƒ¨åˆ†ç®—å­çš„ RVV åç«¯ï¼Œä½†å¾€å¾€å­˜åœ¨ç›¸æ¯”æ ‡é‡å®ç°**æ€§èƒ½è´Ÿä¼˜åŒ–**çš„ç®—å­ï¼Œå¯¼è‡´æ— æ³•å……åˆ†åˆ©ç”¨ RISC-V å¤„ç†å™¨çš„å‘é‡æ‰©å±•æ¨¡å—æ¥åŠ é€Ÿæ¨¡å‹æ¨ç†ã€‚

å¯¹è¿™äº›æ·±åº¦å­¦ä¹ æ¡†æ¶é€ä¸ªæ‰‹åŠ¨æ”¯æŒ RISC-V å‘é‡åŒ–éœ€è¦è€—è´¹å¤§é‡çš„äººåŠ›å’Œæ—¶é—´æˆæœ¬ã€‚å› æ­¤ï¼Œ**äºŸéœ€å¯¹è¿™äº›æ·±åº¦å­¦ä¹ æ¨ç†æ¡†æ¶å®ç°è‡ªåŠ¨åŒ–æ”¯æŒå‘é‡åŒ–ï¼Œå¹¶æå‡æ¨¡å‹æ¨ç†é€Ÿåº¦ã€‚**

### è‡ªåŠ¨åŒ–è¿ç§»çš„ä»·å€¼
è‡ªåŠ¨åŒ–ä»£ç è¿ç§»åœ¨ç»´æŠ¤ç³»ç»Ÿæ–¹é¢è‡³å…³é‡è¦ï¼Œå¯ä»¥é¿å…é‡å¤çš„æ‰‹åŠ¨å·¥ä½œï¼Œå› ä¸ºç³»ç»Ÿåœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­é€šå¸¸ä¼šç»å†å¤šæ¬¡è¿ç§»ã€‚æ·±åº¦å­¦ä¹ æ¨ç†æ¡†æ¶å¯¹ RISC-V çš„å‘é‡åŒ–æ”¯æŒï¼Œæœ¬è´¨ä¸Šæ˜¯ä»ç°æœ‰æˆç†Ÿçš„ x86ã€ARM ç­‰æ¶æ„çš„å‘é‡åŒ–æ”¯æŒï¼Œè·¨æ¶æ„è¿ç§»åˆ° RISC-V çš„è¿‡ç¨‹ã€‚

### å¤§æ¨¡å‹æ™ºèƒ½ä½“çš„æœºé‡
éšç€å¤§æ¨¡å‹å‚æ•°è§„æ¨¡çš„ä¸æ–­æ‰©å¼ ï¼Œå…¶åœ¨ä»£ç é¢†åŸŸçš„æ€§èƒ½å–å¾—äº†æ˜¾è‘—æå‡ã€‚è¿‘å¹´æ¥ï¼Œå¤§æ¨¡å‹æ™ºèƒ½ä½“åœ¨ä»£ç ç”Ÿæˆã€è¡¥å…¨ã€é‡æ„ã€ä¿®å¤ã€æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆä»¥åŠæœ€è¿‘çš„ä»£ç è¿ç§»ç­‰è½¯ä»¶å·¥ç¨‹ä»»åŠ¡ä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚

å› æ­¤ï¼Œåˆ©ç”¨å¤§æ¨¡å‹æ™ºèƒ½ä½“è¿›è¡Œè‡ªåŠ¨ç®—å­æ€§èƒ½ä¼˜åŒ–ï¼Œä¸ä»…èƒ½èŠ‚çœæ‰‹åŠ¨è¿ç§»çš„å¤§é‡æˆæœ¬ï¼Œè¿˜èƒ½æ˜¾è‘—æå‡ç«¯åˆ°ç«¯çš„æ¨¡å‹æ¨ç†é€Ÿåº¦ã€‚

---
## ğŸ§© è¿ç§»éš¾ç‚¹ (Key Challenges)

æœ¬é¡¹ç›®é¢ä¸´çš„æŒ‘æˆ˜ä¸ä»…ä»…æ˜¯æŒ‡ä»¤é›†çš„ç¿»è¯‘ï¼Œæ›´åœ¨äºè·¨è¶Š**ç¡¬ä»¶æ¶æ„èŒƒå¼**ä¸**è½¯ä»¶å·¥ç¨‹å¤æ‚åº¦**çš„åŒé‡é¸¿æ²Ÿã€‚

### 1. æ¶æ„èŒƒå¼çš„æ ¹æœ¬æ€§å·®å¼‚ (Architectural Paradigm Shift)
* **å›ºå®š vs. å¯å˜ (Fixed vs. Scalable)**: x86 AVX/SSE ä¾èµ–å›ºå®šé•¿åº¦å¯„å­˜å™¨ï¼Œä»£ç ä¸­å……æ–¥ç€ç¡¬ç¼–ç çš„æ­¥é•¿ï¼ˆå¦‚ `i += 8`ï¼‰ã€‚è€Œ RISC-V RVV é‡‡ç”¨ç¡¬ä»¶æ— å…³çš„å‘é‡é•¿åº¦ (VLEN)ã€‚è¿ç§»æ—¶å¿…é¡»å°†â€œå®šé•¿å¾ªç¯â€é‡æ„ä¸ºåŸºäº `vsetvli` çš„ **Strip-mining å¾ªç¯**ã€‚
* **æŒ‡ä»¤è¯­ä¹‰é¸¿æ²Ÿ**: è®¸å¤š x86 å¤æ‚æŒ‡ä»¤ï¼ˆå¦‚ `_mm256_shuffle_ps`ï¼‰åœ¨ RISC-V ä¸­æ²¡æœ‰ 1:1 çš„æ˜ å°„ï¼Œéœ€è¦ç»„åˆ `vrgather`, `vmerge`, `vslide` ç­‰å¤šæ¡åŸºç¡€æŒ‡ä»¤æ‰èƒ½ç­‰æ•ˆå®ç°ï¼Œæå…¶è€ƒéªŒæ™ºèƒ½ä½“çš„é€»è¾‘é‡ç»„èƒ½åŠ›ã€‚

### 2. å¤æ‚çš„å¯„å­˜å™¨ä¸å†…å­˜ç®¡ç† (Resource Management)
* **LMUL çš„åŠ¨æ€æƒè¡¡**: RVV ç‹¬æœ‰çš„ **LMUL (Logic Vector Length Multiplier)** æœºåˆ¶è¦æ±‚æ™ºèƒ½ä½“æ ¹æ®ç®—å­è®¡ç®—å¯†åº¦ï¼ŒåŠ¨æ€æ¨æ–­æœ€ä¼˜çš„å¯„å­˜å™¨åˆ†ç»„ç­–ç•¥ï¼Œä»¥å¹³è¡¡æŒ‡ä»¤ååé‡ä¸å¯„å­˜å™¨æº¢å‡ºé£é™©ã€‚
* **NCNN ç‰¹æœ‰çš„æ•°æ®æ‰“åŒ…**: NCNN å¼ºåˆ¶é‡‡ç”¨äº† `elempack` æ•°æ®å¸ƒå±€ã€‚æ™ºèƒ½ä½“å¿…é¡»å…·å¤‡**â€œå¸ƒå±€æ„ŸçŸ¥ (Layout-Aware)â€**èƒ½åŠ›ï¼Œæ­£ç¡®å¤„ç†éæ ‡å‡†å¸ƒå±€ä¸‹çš„ Load/Store åŠè¾¹ç•Œå¯¹é½ï¼Œå¦åˆ™ææ˜“å¼•å‘æ®µé”™è¯¯ã€‚

### 3. é¡¹ç›®çº§ä¾èµ–å¯¼è‡´çš„â€œä¸Šä¸‹æ–‡å¹»è§‰â€ (Project-Level Hallucination)
è¿™æ˜¯ä» Demo èµ°å‘çœŸå®å·¥ç¨‹æœ€å¤§çš„æ‹¦è·¯è™ã€‚
* **éšå½¢ä¾èµ–é“¾ (Implicit Dependency Chains)**: 
    * çœŸå®ç®—å­å®ç°å¹¶éå­¤ç«‹å­˜åœ¨ï¼Œå¾€å¾€ä¾èµ–åˆ†æ•£åœ¨ `headers/`ã€`utils/` ä¸­çš„å®å®šä¹‰ã€ç»“æ„ä½“å£°æ˜åŠè¾…åŠ©å‡½æ•°ã€‚
    * **éš¾ç‚¹**: æ™ºèƒ½ä½“å¦‚æœåªå…³æ³¨å½“å‰æºæ–‡ä»¶ï¼Œä¼šå› ç¼ºå¤±ç±»å‹å®šä¹‰è€Œ**â€œè‡†é€ â€ (Hallucinate)** å‡ºä¸å­˜åœ¨çš„ API æˆ–é”™è¯¯çš„å‡½æ•°ç­¾åï¼›è‹¥å¼•å…¥è¿‡å¤šæ— å…³æ–‡ä»¶ï¼Œåˆä¼šå›  Context Window å™ªå£°å¯¼è‡´æ³¨æ„åŠ›åˆ†æ•£ã€‚
* **é¢„å¤„ç†å™¨çš„â€œè¿·é›¾â€ (Macro Obfuscation)**: 
    * NCNN å¤§é‡ä½¿ç”¨ C é¢„å¤„ç†å™¨ï¼ˆMacrosï¼‰æ¥ç”Ÿæˆæ¨¡æ¿ä»£ç ï¼ˆå¦‚ `DEFINE_LAYER_CREATOR`ï¼‰ã€‚
    * **éš¾ç‚¹**: è¿™ç§å…ƒç¼–ç¨‹æ‰‹æ®µæ©ç›–äº†çœŸå®çš„æ§åˆ¶æµã€‚æ™ºèƒ½ä½“éš¾ä»¥åƒç¼–è¯‘å™¨ä¸€æ ·ç²¾å‡†å±•å¼€å®ï¼Œææ˜“åœ¨ç†è§£ä»£ç é€»è¾‘æ—¶äº§ç”Ÿè¯¯åˆ¤ï¼Œå¯¼è‡´ç”Ÿæˆçš„è¿ç§»ä»£ç å¼•ç”¨äº†é”™è¯¯çš„ç¬¦å·æˆ–é€»è¾‘åˆ†æ”¯ã€‚

> **æ€»ç»“**: æœ¬ Benchmark è¦æ±‚æ™ºèƒ½ä½“å…·å¤‡**å…¨æ ˆèƒ½åŠ›**ï¼šå‘ä¸‹è¦ç²¾é€š RVV æ±‡ç¼–ä¸å¾®æ¶æ„ç‰¹æ€§ï¼Œå‘ä¸Šè¦èƒ½è§£æå¤æ‚çš„ C++ å·¥ç¨‹ä¾èµ–å…³ç³»ï¼Œå‡†ç¡®ç®¡ç†ä¸Šä¸‹æ–‡ä»¥æŠ‘åˆ¶å¹»è§‰ã€‚
---

## âš–ï¸ ä¸å…¶ä»– Benchmark çš„å·®å¼‚ (Comparison)

> *æœ¬ç« èŠ‚å¯¹æ¯”æœ¬ Benchmark ä¸ç°æœ‰çš„ä»£ç ç”Ÿæˆ/è¿ç§»æ•°æ®é›†ï¼ˆå¦‚ HumanEval, MBPPï¼‰ä»¥åŠå…¶ä»–é«˜æ€§èƒ½åº“ï¼ˆå¦‚ OpenCVï¼‰çš„å·®å¼‚ã€‚*

### ğŸ†š vs. é€šç”¨ä»£ç  Benchmark
* å¤§å¤šæ•°ç°æœ‰ Benchmark å…³æ³¨ Python/Java ç­‰é€šç”¨é€»è¾‘ï¼Œç¼ºä¹å¯¹ **åº•å±‚ç¡¬ä»¶æŒ‡ä»¤ (Intrinsics)** å’Œ **å¹¶è¡Œè®¡ç®—** çš„è€ƒé‡ã€‚

### ğŸ†š OpenCV vs. å…¶ä»–åº“
* **(é™ˆé¹é£éƒ¨åˆ†):** ä»‹ç»ä¸ OpenCV è¿ç§»ä»»åŠ¡çš„å·®å¼‚...
### ğŸ†š NCNN vs.  å…¶ä»–åº“
## âš–ï¸ ä¸ç›¸å…³ Benchmark çš„å¯¹æ¯” (Comparison with Related Benchmarks)

æœ¬ Benchmark å¡«è¡¥äº†ç°æœ‰ä»£ç è¯„æµ‹æ•°æ®é›†åœ¨ **è·¨æ¶æ„è¿ç§» (Cross-Architecture)** ä¸ **æè‡´æ€§èƒ½ä¼˜åŒ– (Performance-Critical)** äº¤å‰é¢†åŸŸçš„ç©ºç™½ã€‚

æˆ‘ä»¬å°† **Agent-NCNN** ä¸å½“å‰ä¸»æµçš„ä»£ç ç”Ÿæˆ/è½¯ä»¶å·¥ç¨‹ Benchmark è¿›è¡Œäº†å¤šç»´åº¦å¯¹æ¯”ã€‚å¯¹æ¯”ç»´åº¦åŒ…æ‹¬ï¼š
* **ç²’åº¦ (Granularity)**: ä»»åŠ¡æ˜¯å‡½æ•°çº§ (Func)ã€ç±»çº§ (Class) è¿˜æ˜¯ä»“åº“çº§ (Repo)ã€‚
* **è¯­è¨€ (Language)**: æ¶‰åŠçš„ç¼–ç¨‹è¯­è¨€ã€‚
* **æ€§èƒ½è¯„ä¼° (Perf)**: æ˜¯å¦å…³æ³¨ä»£ç è¿è¡Œæ•ˆç‡ï¼ˆå»¶è¿Ÿ/ååï¼‰ã€‚
* **è·¨æ¶æ„ (Cross-Arch)**: æ˜¯å¦æ¶‰åŠä¸åŒç¡¬ä»¶æŒ‡ä»¤é›†ä¹‹é—´çš„è¿ç§»ã€‚

### ğŸ“Š ç»¼åˆå¯¹æ¯”è¡¨ (Comparison Table)

| Benchmark | ç²’åº¦ (Granularity) | è¯­è¨€ (Language) | æ­£ç¡®æ€§ (Correctness) | æ€§èƒ½ (Perf) | è·¨æ¶æ„ (Cross-Arch) | æ ¸å¿ƒä»»åŠ¡ (Task Focus) |
| :--- | :--- | :--- | :---: | :---: | :---: | :--- |
| **ClassEval** | Class-level | Python | âœ… | âŒ | âŒ | ç±»çº§åˆ«çš„ä»£ç ç”Ÿæˆ |
| **SWE-bench** | Repo-level | Python | âœ… | âŒ | âŒ | è§£å†³çœŸå® GitHub Issue |
| **JavaBench** | Repo-level | Java | âœ… | âŒ | âŒ | ä¸“ä¸š Java å¼€å‘èƒ½åŠ› |
| **KernelBench** | Repo-level | CUDA | âœ… | âœ… | âŒ | é«˜æ€§èƒ½ GPU å†…æ ¸ç”Ÿæˆ |
| **ParEval** | Func-level | CUDA/C++ | âœ… | âœ… | âŒ | å¹¶è¡Œè®¡ç®—ç¨‹åºç”Ÿæˆ |
| **Swe-Perf** | Repo-level | Python | âœ… | âœ… | âŒ | ä»“åº“çº§æ€§èƒ½ç“¶é¢ˆä¿®å¤ |
| **CISC-RISC** | Func-level | Assembly | âœ… | âŒ | âœ… | æ±‡ç¼–ä»£ç è½¬è¯‘ |
| **Agent-NCNN (Ours)** | **Repo-level** | **C++ / RVV** | **âœ…** | **âœ…** | **âœ…** | **è·¨æ¶æ„ç®—å­è¿ç§»ä¸ä¼˜åŒ–** |

### ğŸš€ æ ¸å¿ƒå·®å¼‚åˆ†æ (Key Differentiators)

ä»ä¸Šè¡¨å¯ä»¥çœ‹å‡ºï¼Œ**Agent-NCNN** æ˜¯å”¯ä¸€åŒæ—¶è¦†ç›– **ä»“åº“çº§ä¸Šä¸‹æ–‡**ã€**æ€§èƒ½ä¼˜åŒ–** å’Œ **è·¨æ¶æ„è¿ç§»** ä¸‰å¤§æŒ‘æˆ˜çš„ Benchmarkã€‚

#### 1. æ¯”é€šç”¨ä»£ç ç”Ÿæˆæ›´â€œç¡¬æ ¸â€ (vs. ClassEval, SWE-bench)
* é€šç”¨ Benchmarkï¼ˆå¦‚ SWE-benchï¼‰ä¸»è¦å…³æ³¨é€»è¾‘æ­£ç¡®æ€§ã€‚
* **Agent-NCNN** ä¸ä»…è¦æ±‚ä»£ç è·‘é€šï¼Œè¿˜è¦æ±‚ç”Ÿæˆçš„ **RISC-V RVV ä»£ç ** åœ¨æ€§èƒ½ä¸Šå¿…é¡»è¶…è¶Šæ ‡é‡å®ç°ã€‚è¿™å¼•å…¥äº†é¢å¤–çš„**â€œæ€§èƒ½çº¦æŸâ€ (Performance Constraints)**ï¼Œè¿«ä½¿æ™ºèƒ½ä½“ç†è§£åº•å±‚ç¡¬ä»¶ç‰¹æ€§ã€‚

#### 2. æ¯”é«˜æ€§èƒ½è®¡ç®—åº“æ›´â€œå¤æ‚â€ (vs. KernelBench, ParEval)
* KernelBench å’Œ ParEval è™½ç„¶å…³æ³¨æ€§èƒ½ï¼Œä½†å¤šä¸ºç‹¬ç«‹çš„ Kernel ç”Ÿæˆã€‚
* **Agent-NCNN** å¤„äº **Repo-level**ã€‚çœŸå®çš„ NCNN ç®—å­è¿ç§»æ— æ³•è„±ç¦»é¡¹ç›®ä¸Šä¸‹æ–‡ï¼ˆå¦‚ `ncnn/layer.h` ä¸­çš„å®å®šä¹‰ã€`elempack` æ•°æ®æ‰“åŒ…ç­–ç•¥ã€å·¥å…·å‡½æ•°ä¾èµ–ï¼‰ã€‚æ™ºèƒ½ä½“å¿…é¡»åœ¨å¤„ç†**è·¨æ–‡ä»¶ä¾èµ–**çš„åŒæ—¶è¿›è¡Œå¾®æ¶æ„ä¼˜åŒ–ã€‚

#### 3. æ¯”å•çº¯æ±‡ç¼–è½¬è¯‘æ›´â€œå·¥ç¨‹åŒ–â€ (vs. CISC-RISC)
* CISC-RISC èšç„¦äºæ±‡ç¼–åˆ°æ±‡ç¼–çš„ç¿»è¯‘ã€‚
* **Agent-NCNN** æ¨¡æ‹Ÿäº†çœŸå®çš„è½¯ä»¶å·¥ç¨‹è¿ç§»åœºæ™¯ï¼šè¾“å…¥æ˜¯ **x86 Intrinsic (C++)**ï¼Œè¾“å‡ºæ˜¯ **RVV Intrinsic (C++)**ã€‚è¿™ä¸ä»…æ˜¯æŒ‡ä»¤ç¿»è¯‘ï¼Œæ›´æ˜¯ä»**å®šé•¿å‘é‡ (Fixed SIMD)** åˆ° **å˜é•¿å‘é‡ (Scalable Vector)** çš„ç®—æ³•é‡æ„ã€‚


---
## ğŸ“Š æµ‹è¯•è®¾è®¡ä¸éš¾åº¦åˆ†çº§ (Test Design & Hierarchy)

æœ¬ Benchmark é‡‡ç”¨åˆ†å±‚æµ‹è¯•çš„æ–¹æ³•è®ºï¼Œä»å¾®è§‚çš„ç®—å­å®ç°åˆ°å®è§‚çš„æ¨¡å‹æ¨ç†ï¼Œæ„å»ºäº† **ç®—å­çº§ (Operator)**ã€**æ¨¡å‹çº§ (Model)** å’Œ **åº“çº§ (Library)** ä¸‰å¤§ç»´åº¦çš„è¯„ä¼°ä½“ç³»ã€‚

### 1. æµ‹è¯•å±‚çº§è®¾è®¡ (Test Levels)

#### ğŸŸ¢ Level 1: ç®—å­çº§æµ‹è¯• (Operator Level)
è¿™æ˜¯ Benchmark çš„åŸºçŸ³ï¼Œå…³æ³¨å•ä¸ªç®—å­ä» x86/ARM åˆ° RISC-V RVV çš„è¿ç§»è´¨é‡ã€‚
* **åŠŸèƒ½æ­£ç¡®æ€§æµ‹è¯• (Unit Testing)**: 
    * å¯¹è¿ç§»åçš„ç®—å­è¿›è¡Œä¸¥æ ¼çš„å•å…ƒæµ‹è¯•ã€‚
    * **æ ‡å‡†**: å¿…é¡»é€šè¿‡äººç±»æ‰‹åŠ¨ç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹ (Test Cases)ï¼Œè¾“å‡ºç»“æœéœ€ä¸æ ‡é‡å®ç°æŒ‰ä½ä¸€è‡´ (Bit-exact match) æˆ–è¯¯å·®åœ¨å®¹è®¸èŒƒå›´å†…ã€‚
* **æ€§èƒ½åŸºå‡†æµ‹è¯• (Performance Benchmarking)**: 
    * å¯¹æ¯”è¯„ä¼°è¿ç§»åçš„ RVV ç®—å­æ€§èƒ½ã€‚
    * **åŸºçº¿ (Baseline)**: RISC-V æ ‡é‡å®ç° (Scalar Implementation)ã€‚
    * **å‚è€ƒ (Reference)**: äººç±»ä¸“å®¶æ‰‹å·¥ä¼˜åŒ–çš„ RVV ç®—å­æ€§èƒ½ (Human-Optimized)ã€‚

#### ğŸŸ¡ Level 2: æ¨¡å‹çº§æµ‹è¯• (Model Level)
å…³æ³¨å¤šä¸ªç®—å­ååŒå·¥ä½œæ—¶çš„ç«¯åˆ°ç«¯è¡¨ç°ã€‚
* **Step 1: ç®—å­è¦†ç›–æµ‹è¯•**: é¦–å…ˆå¯¹ç›®æ ‡æ¨¡å‹æ¶‰åŠçš„æ‰€æœ‰ç®—å­ç±»å‹è¿›è¡Œå•ç‹¬çš„å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿â€œç§¯æœ¨å—â€çš„åŠŸèƒ½æ­£ç¡®æ€§ã€‚
* **Step 2: æ¨ç†ç²¾åº¦æµ‹è¯• (Inference Accuracy)**: 
    * è¿è¡Œå®Œæ•´æ¨¡å‹çš„æ¨ç†æµç¨‹ã€‚
    * **æŒ‡æ ‡**: å°†æ¨¡å‹çš„æ¨ç†ç»“æœä¸ RISC-V æ ‡é‡å®ç°ä¸‹çš„ç»“æœè¿›è¡Œå¯¹æ¯”ï¼Œè®¡ç®— Top-1/Top-5 ç²¾åº¦æŸå¤±ï¼Œç¡®ä¿æ— é€»è¾‘é”™è¯¯å¯¼è‡´çš„ç²¾åº¦å´©å¡Œã€‚
* **Step 3: ç«¯åˆ°ç«¯æ€§èƒ½æµ‹è¯• (E2E Performance)**: 
    * æµ‹è¯•æ•´ä¸ªæ¨¡å‹å®Œæˆä¸€æ¬¡æ¨ç†æ‰€éœ€çš„æ€»è€—æ—¶ï¼ˆLatencyï¼‰ã€‚
    * **è¯„ä¼°**: å¯¹æ¯”æ ‡é‡å®ç°å’Œäººç±»æ‰‹å·¥å®ç°çš„åŠ é€Ÿæ¯” (Speedup)ã€‚

#### ğŸ”´ Level 3: åº“çº§æµ‹è¯• (Library Level)
* *ğŸš§ æ•¬è¯·æœŸå¾… (Coming Soon)* - æ—¨åœ¨è¯„ä¼°æ•´ä¸ª NCNN åº“åœ¨ RISC-V æ¶æ„ä¸Šçš„ç¼–è¯‘æ„å»ºã€ä¾èµ–ç®¡ç†åŠç³»ç»Ÿçº§å…¼å®¹æ€§ã€‚

---

### 2. éš¾åº¦åˆ†çº§æ ‡å‡† (Difficulty Standards)

ä¸ºäº†ç§‘å­¦è¯„ä¼°æ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œï¼Œæˆ‘ä»¬åœ¨ä¸åŒå±‚çº§è®¾è®¡äº†ç»†ç²’åº¦çš„éš¾åº¦åˆ†çº§ã€‚

#### ğŸ§© ç®—å­çº§éš¾åº¦ (Operator Difficulty)
åŸºäº**è½¯ä»¶é€»è¾‘**ä¸**ç¡¬ä»¶ç‰¹æ€§**çš„åŒé‡ç»´åº¦è¿›è¡Œåˆ†çº§ã€‚
* **ä¾æ®**: ç®—å­çš„ä»£ç è¡Œæ•°ã€æ§åˆ¶æµå¤æ‚åº¦ (Software) ä»¥åŠæŒ‡ä»¤ååã€å‘é‡åŒ–éš¾åº¦ (Hardware)ã€‚
* **æ•°æ®**: è¯¦ç»†åˆ†çº§è¯·å‚é˜… [docs/operator_difficulty_matrix.csv](./docs/operator_difficulty_matrix.csv)ã€‚

#### ğŸ§  æ¨¡å‹çº§éš¾åº¦ (Model Difficulty)
åŸºäºæ¨¡å‹åŒ…å«çš„**ç®—å­å¤šæ ·æ€§ (Variety)** å’Œ **ç®—å­æ•°é‡ (Quantity)** è¿›è¡Œåˆ†çº§ã€‚
* **Easy**: ç®—å­ç§ç±»å°‘ä¸”å¤šä¸ºåŸºç¡€ç®—å­ï¼ˆå¦‚ MobileNetV1ï¼‰ã€‚
* **Medium**: ç®—å­ç§ç±»ä¸°å¯Œï¼ŒåŒ…å«å°‘é‡è‡ªå®šä¹‰ç®—å­ï¼ˆå¦‚ ResNet-50ï¼‰ã€‚
* **Hard**: ç®—å­è®¡ç®—å›¾å¤æ‚ï¼ŒåŒ…å«å¤§é‡éæ ‡å‡†ç®—å­æˆ–åŠ¨æ€æ§åˆ¶æµï¼ˆå¦‚ YOLOv5, Transformerï¼‰ã€‚

#### ğŸ“š åº“çº§éš¾åº¦ (Library Difficulty)
* *ğŸš§ æ•¬è¯·æœŸå¾… (Coming Soon)*

---

## ğŸ§ª å„ç±»æµ‹è¯•é¢˜ç›® (Test Cases)

åŸºäºä¸Šè¿°è®¾è®¡ï¼Œæˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„æµ‹è¯•ç”¨ä¾‹é›†ã€‚

### 1. ç®—å­çº§é¢˜ç›® (Operator Cases)
è¦†ç›–äº† 27 ä¸ªæ ¸å¿ƒç®—å­ï¼ŒåŒ…å«ï¼š
* **åŸºç¡€è®¡ç®—**: `Add`, `Sub`, `Mul`
* **ç¥ç»ç½‘ç»œå±‚**: `Conv2d`, `DepthwiseConv`, `Pooling`, `Softmax`
* **æ•°æ®å˜æ¢**: `Packing`, `Interleave`, `Shuffle`

### 2. æ¨¡å‹çº§é¢˜ç›® (Model Cases)
é€‰å–äº†å·¥ä¸šç•Œæœ€å¸¸ç”¨çš„ä»£è¡¨æ€§æ¨¡å‹è¿›è¡Œç«¯åˆ°ç«¯è¿ç§»è¯„ä¼°ï¼š
* **åˆ†ç±» (Classification)**: `MobileNetV2`, `ResNet-18`, `SqueezeNet`
* **æ£€æµ‹ (Detection)**: `YOLO-Fastest`, `NanoDet`
* **å…¶å®ƒ**: `SimplePose` (å§¿æ€ä¼°è®¡)


### 3. åº“çº§é¢˜ç›® (lib Cases)
æ•¬è¯·æœŸå¾…

> ğŸ“¥ **è·å–å®Œæ•´æµ‹è¯•æ•°æ®**: è¯·è®¿é—® `data/` ç›®å½•è·å–è¯¦ç»† JSON æ ¼å¼çš„æµ‹è¯•ç”¨ä¾‹ã€‚


---

## ğŸ† åŸºå‡†æµ‹è¯•ç»“æœ (SoTA Results)

æˆ‘ä»¬è¯„ä¼°äº†å½“å‰æœ€å…ˆè¿›çš„å¤§æ¨¡å‹æ™ºèƒ½ä½“ï¼ˆå¦‚ GPT-4o, Claude 3.5, DeepSeek-Coder ç­‰ï¼‰åœ¨æœ¬ Benchmark ä¸Šçš„è¡¨ç°ã€‚

| Model / Agent | Strategy | Easy (Pass@1) | Medium (Pass@1) | Hard (Pass@1) | Average Speedup |
| :--- | :--- | :--- | :--- | :--- | :--- |
| GPT-4o | Zero-shot | - | - | - | - |
| Claude 3.5 Sonnet | CoT | - | - | - | - |
| **Ours (Agent)** | **Multi-Agent** | **-** | **-** | **-** | **-** |

---

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³• (Getting Started)

```bash
# 1. Clone the repository
git clone [https://github.com/YourOrg/Agent-NCNN-Benchmark.git](https://github.com/YourOrg/Agent-NCNN-Benchmark.git)

# 2. Install dependencies
pip install -r requirements.txt

# 3. Run the benchmark
python run_benchmark.py --target riscv --model gpt-4